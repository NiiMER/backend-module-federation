# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.
tasks:
  - before: mkdir -p /tmp/mongodb && \
      cd /tmp/mongodb && \
      wget -qOmongodb.tgz https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-ubuntu2004-5.0.2.tgz && \
      tar xf mongodb.tgz && \
      cd mongodb-* && sudo cp bin/* /usr/local/bin/ && \
      cd /workspace && rm -rf /tmp/mongodb && \
      sudo mkdir -p /workspace/db && \
      sudo chown gitpod:gitpod -R /workspace/db
      mongod --dbpath /workspace/db
      yarn && yarn build && yarn link && \
      cd /workspace && \
      git clone https://github.com/module-federation/aegis-host && \
      cd aegis-host && cp dotenv.example .env && \
      yarn link @module-federation/aegis && \
      yarn && yarn build
  - init: cd /workspace/aegis-host && yarn start
